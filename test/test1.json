[ { "id":0, "type":"Program", "children":[1,3,8,17,30,46,105] }, { "id":1, "type":"ExpressionStatement", "children":[2] }, { "id":2, "type":"LiteralString", "value":"use strict" }, { "id":3, "type":"VariableDeclaration", "children":[4] }, { "id":4, "type":"VariableDeclarator", "value":"Promise", "children":[5] }, { "id":5, "type":"CallExpression", "children":[6,7] }, { "id":6, "type":"Identifier", "value":"require" }, { "id":7, "type":"LiteralString", "value":"bluebird" }, { "id":8, "type":"FunctionDeclaration", "children":[9,10] }, { "id":9, "type":"Identifier", "value":"Migrator" }, { "id":10, "type":"BlockStatement", "children":[11] }, { "id":11, "type":"ExpressionStatement", "children":[12] }, { "id":12, "type":"AssignmentExpression", "children":[13,16] }, { "id":13, "type":"MemberExpression", "children":[14,15] }, { "id":14, "type":"ThisExpression" }, { "id":15, "type":"Property", "value":"store" }, { "id":16, "type":"ObjectExpression" }, { "id":17, "type":"ExpressionStatement", "children":[18] }, { "id":18, "type":"AssignmentExpression", "children":[19,24] }, { "id":19, "type":"MemberExpression", "children":[20,23] }, { "id":20, "type":"MemberExpression", "children":[21,22] }, { "id":21, "type":"Identifier", "value":"Migrator" }, { "id":22, "type":"Property", "value":"prototype" }, { "id":23, "type":"Property", "value":"list" }, { "id":24, "type":"FunctionExpression", "children":[25] }, { "id":25, "type":"BlockStatement", "children":[26] }, { "id":26, "type":"ReturnStatement", "children":[27] }, { "id":27, "type":"MemberExpression", "children":[28,29] }, { "id":28, "type":"ThisExpression" }, { "id":29, "type":"Property", "value":"store" }, { "id":30, "type":"ExpressionStatement", "children":[31] }, { "id":31, "type":"AssignmentExpression", "children":[32,37] }, { "id":32, "type":"MemberExpression", "children":[33,36] }, { "id":33, "type":"MemberExpression", "children":[34,35] }, { "id":34, "type":"Identifier", "value":"Migrator" }, { "id":35, "type":"Property", "value":"prototype" }, { "id":36, "type":"Property", "value":"get" }, { "id":37, "type":"FunctionExpression", "children":[38,39] }, { "id":38, "type":"Identifier", "value":"name" }, { "id":39, "type":"BlockStatement", "children":[40] }, { "id":40, "type":"ReturnStatement", "children":[41] }, { "id":41, "type":"ArrayAccess", "children":[42,45] }, { "id":42, "type":"MemberExpression", "children":[43,44] }, { "id":43, "type":"ThisExpression" }, { "id":44, "type":"Property", "value":"store" }, { "id":45, "type":"Property", "value":"name" }, { "id":46, "type":"ExpressionStatement", "children":[47] }, { "id":47, "type":"AssignmentExpression", "children":[48,53] }, { "id":48, "type":"MemberExpression", "children":[49,52] }, { "id":49, "type":"MemberExpression", "children":[50,51] }, { "id":50, "type":"Identifier", "value":"Migrator" }, { "id":51, "type":"Property", "value":"prototype" }, { "id":52, "type":"Property", "value":"register" }, { "id":53, "type":"FunctionExpression", "children":[54,55,56] }, { "id":54, "type":"Identifier", "value":"name" }, { "id":55, "type":"Identifier", "value":"fn" }, { "id":56, "type":"BlockStatement", "children":[57,64,73,97] }, { "id":57, "type":"IfStatement", "children":[58,60] }, { "id":58, "type":"UnaryExpression", "value":"!", "children":[59] }, { "id":59, "type":"Identifier", "value":"name" }, { "id":60, "type":"ThrowStatement", "children":[61] }, { "id":61, "type":"NewExpression", "children":[62,63] }, { "id":62, "type":"Identifier", "value":"TypeError" }, { "id":63, "type":"LiteralString", "value":"name is required" }, { "id":64, "type":"IfStatement", "children":[65,69] }, { "id":65, "type":"BinaryExpression", "value":"!==", "children":[66,68] }, { "id":66, "type":"UnaryExpression", "value":"typeof", "children":[67] }, { "id":67, "type":"Identifier", "value":"fn" }, { "id":68, "type":"LiteralString", "value":"function" }, { "id":69, "type":"ThrowStatement", "children":[70] }, { "id":70, "type":"NewExpression", "children":[71,72] }, { "id":71, "type":"Identifier", "value":"TypeError" }, { "id":72, "type":"LiteralString", "value":"fn must be a function" }, { "id":73, "type":"IfStatement", "children":[74,79,88] }, { "id":74, "type":"BinaryExpression", "value":">", "children":[75,78] }, { "id":75, "type":"MemberExpression", "children":[76,77] }, { "id":76, "type":"Identifier", "value":"fn" }, { "id":77, "type":"Property", "value":"length" }, { "id":78, "type":"LiteralNumber", "value":"1" }, { "id":79, "type":"BlockStatement", "children":[80] }, { "id":80, "type":"ExpressionStatement", "children":[81] }, { "id":81, "type":"AssignmentExpression", "children":[82,83] }, { "id":82, "type":"Identifier", "value":"fn" }, { "id":83, "type":"CallExpression", "children":[84,87] }, { "id":84, "type":"MemberExpression", "children":[85,86] }, { "id":85, "type":"Identifier", "value":"Promise" }, { "id":86, "type":"Property", "value":"promisify" }, { "id":87, "type":"Identifier", "value":"fn" }, { "id":88, "type":"BlockStatement", "children":[89] }, { "id":89, "type":"ExpressionStatement", "children":[90] }, { "id":90, "type":"AssignmentExpression", "children":[91,92] }, { "id":91, "type":"Identifier", "value":"fn" }, { "id":92, "type":"CallExpression", "children":[93,96] }, { "id":93, "type":"MemberExpression", "children":[94,95] }, { "id":94, "type":"Identifier", "value":"Promise" }, { "id":95, "type":"Property", "value":"method" }, { "id":96, "type":"Identifier", "value":"fn" }, { "id":97, "type":"ExpressionStatement", "children":[98] }, { "id":98, "type":"AssignmentExpression", "children":[99,104] }, { "id":99, "type":"ArrayAccess", "children":[100,103] }, { "id":100, "type":"MemberExpression", "children":[101,102] }, { "id":101, "type":"ThisExpression" }, { "id":102, "type":"Property", "value":"store" }, { "id":103, "type":"Property", "value":"name" }, { "id":104, "type":"Identifier", "value":"fn" }, { "id":105, "type":"ExpressionStatement", "children":[106] }, { "id":106, "type":"AssignmentExpression", "children":[107,110] }, { "id":107, "type":"MemberExpression", "children":[108,109] }, { "id":108, "type":"Identifier", "value":"module" }, { "id":109, "type":"Property", "value":"exports" }, { "id":110, "type":"Identifier", "value":"Migrator" }, 0]