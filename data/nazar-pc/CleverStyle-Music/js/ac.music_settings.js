// Generated by CoffeeScript 1.4.0

/**
 * @package     CleverStyle Music
 * @category    app
 * @author      Nazar Mokrynskyi <nazar@mokrynskyi.com>
 * @copyright   Copyright (c) 2014, Nazar Mokrynskyi
 * @license     MIT License, see license.txt
*/


(function() {

  cs.music_settings = (function() {
    var option, public_settings, settings, _fn, _i, _len, _ref;
    settings = localStorage.settings;
    settings = settings ? JSON.parse(settings) : {
      repeat: 'all',
      shuffle: true,
      equalizer_gain_levels: [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
      reverb_mode: '',
      low_performance: null
    };
    public_settings = {};
    _ref = ['repeat', 'shuffle', 'equalizer_gain_levels', 'reverb_mode', 'low_performance'];
    _fn = function(option) {
      return Object.defineProperty(public_settings, option, {
        get: function() {
          return settings[option];
        },
        set: function(value) {
          settings[option] = value;
          return localStorage.settings = JSON.stringify(settings);
        }
      });
    };
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      option = _ref[_i];
      _fn(option);
    }
    if (public_settings.low_performance === null) {
      document.webL10n.ready(function() {
        public_settings.low_performance = confirm(_('low-performance-mode-details'));
        return location.reload();
      });
    }
    if (public_settings.low_performance) {
      $(function() {
        return $('body').addClass('low-performance');
      });
    }
    return public_settings;
  })();

}).call(this);
